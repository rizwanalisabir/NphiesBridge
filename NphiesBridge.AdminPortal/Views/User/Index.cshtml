@model List<NphiesBridge.Shared.DTOs.UserResponseDto>
@{
    ViewBag.Title = "User Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <div>
            <h5 class="mb-0">User Management</h5>
            <small class="text-muted">Manage system users and their access levels</small>
        </div>
        <a href="javascript:void(0);" class="btn-add-modern"
           onclick="openModal('Add New User', '@Url.Action("Create", null)')">
            <i class="zmdi zmdi-account-add"></i> Add User
        </a>
    </div>
    <div class="card-body">
        @if (Model.Any())
        {
            <div class="modern-list-container">
                @foreach (var user in Model)
                {
                    <div class="modern-row">
                        <div class="row-avatar">
                            @(user.FirstName.Substring(0, 1) + user.LastName.Substring(0, 1))
                        </div>

                        <div class="row-content">
                            <div class="row-main-info">
                                <div class="row-title">@user.FullName</div>
                                <div class="row-subtitle">@user.Email</div>
                            </div>

                            <div class="row-info-item">
                                <div class="row-info-label">Role</div>
                                <div class="row-info-value">
                                    @if (user.Role == "Admin")
                                    {
                                        <span class="row-status role-admin">
                                            <i class="zmdi zmdi-shield-security mr-1"></i>Admin
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="row-status role-provider">
                                            <i class="zmdi zmdi-hospital mr-1"></i>Provider
                                        </span>
                                    }
                                </div>
                            </div>

                            <div class="row-info-item">
                                <div class="row-info-label">Health Provider</div>
                                <div class="row-info-value">
                                    @if (!string.IsNullOrEmpty(user.HealthProviderName))
                                    {
                                        <span>@user.HealthProviderName</span>
                                    }
                                    else
                                    {
                                        <span class="text-muted">Not Assigned</span>
                                    }
                                </div>
                            </div>

                            <div class="row-info-item">
                                <div class="row-info-label">Status</div>
                                <div class="row-info-value">
                                    @if (user.IsActive)
                                    {
                                        <span class="row-status status-active">
                                            <i class="zmdi zmdi-check-circle mr-1"></i>Active
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="row-status status-inactive">
                                            <i class="zmdi zmdi-pause-circle mr-1"></i>Inactive
                                        </span>
                                    }
                                </div>
                            </div>

                            <div class="row-info-item">
                                <div class="row-info-label">Created</div>
                                <div class="row-info-value">
                                    @user.CreatedAt.ToString("MMM dd, yyyy")
                                    @if (user.EmailConfirmed)
                                    {
                                        <i class="zmdi zmdi-check-circle text-success ml-1" title="Email Verified"></i>
                                    }
                                </div>
                            </div>
                        </div>

                        <div class="row-actions">
                            <a href="javascript:void(0);" class="action-btn action-btn-edit"
                               onclick="openModal('Edit User', '@Url.Action("Edit", new { id = user.Id })')">
                                <i class="zmdi zmdi-edit action-icon"></i>
                            </a>
                            <a href="javascript:void(0);" class="action-btn action-btn-delete"
                               onclick="openModal('Delete User', '@Url.Action("Delete", new { id = user.Id })')">
                                <i class="zmdi zmdi-delete action-icon"></i>
                            </a>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="empty-state-modern">
                <div class="empty-icon">
                    <i class="zmdi zmdi-accounts"></i>
                </div>
                <div class="empty-title">No Users Found</div>
                <div class="empty-subtitle">Start by adding your first system user</div>
                <a href="javascript:void(0);" class="btn-add-modern"
                   onclick="openModal('Add New User', '@Url.Action("Create", null)')">
                    <i class="zmdi zmdi-account-add mr-2"></i> Add First User
                </a>
            </div>
        }
    </div>
</div>